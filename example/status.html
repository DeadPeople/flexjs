<!DOCTYPE html>
<html>
	<head>
		<title>FlexJS Sample</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<!-- jQuery -->
		<script src="assets/jquery.js"></script>
		<!-- flexjs -->
		<script src="../src/flexjs.js"></script>

<style>
svg text {
	fill: #666;
}

svg .pass text {
	fill: green;
}

svg circle {
	fill: #999;
}

svg .pass circle {
	fill: green;
}

svg line {
	stroke:#CCCCCC;
	stroke-width:12;
}

svg line.pass {
	stroke:#44AA44;
}
</style>

		<script>
			$(document).ready(function(){
				tmpl_unit = $("#tmpl_svg [data-tmpl='demo']").flexsvg();

				objs = [
					{name: "Identified", pass: true},
					{name: "In Process", pass: true},
					{name: "Released"},
					{name: "Done"},
				];

				units = tmpl_unit.getInstance({
					objects: objs,
					update: function(data) {
						if(data.pass == true) {
							$(this).attr("class", "pass");
						} else {
							$(this).removeAttr("class");
						}
					}
				});
				$("#target_svg").append(units);

				var _pre = null;
				for(var i in units) {
					var unit = units[i];
					unit.addTransform("translate", (i * 150) + ", 0");

					if(_pre != null) {
						console.log(unit.transform());
						var xmlns = "http://www.w3.org/2000/svg";
						var elem = document.createElementNS(xmlns, "line");
						
						var $line = $(elem);
						$line.attr("x1", _pre.transform().translate[0]+50);
						$line.attr("y1", _pre.transform().translate[1]+50);
						$line.attr("x2", unit.transform().translate[0]+50);
						$line.attr("y2", unit.transform().translate[1]+50);
						if(unit.object().pass == true) $line.attr("class", "pass");
						$("#target_svg #target_svg_lines").append($line);
					}
					_pre = unit;
				}
			});
		</script>
	</head>
	<body>
		<svg id="tmpl_svg" height="200" version="1.1" xmlns="http://www.w3.org/2000/svg" style="display: none;">
			<g data-tmpl="demo">
				<circle cx="50" cy="50" r="10" />
				<text data-bind-target="name" x="50" y="30" text-anchor="middle"
				font-size="20">OMG</text>
			</g>
		</svg>

		<svg id="target_svg" width="100%" height="200" ViewBox="0 0 600 100"
			version="1.1" xmlns="http://www.w3.org/2000/svg">
			<g id="target_svg_lines">
			</g>
		</svg>
	</body>
</html>